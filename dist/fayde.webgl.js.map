{"version":3,"sources":["_version.ts","WebGLCanvas.ts","WebGLDrawEventArgs.ts","WebGLSource.ts","updater/WebGLCanvasUpdater.ts","updater/arrange/WebGLCanvasArrangePipeDef.ts","updater/measure/WebGLCanvasMeasurePipeDef.ts","updater/render/WebGLCanvasRenderPipeDef.ts","updater/arrange/tapins/buildLayoutClip.ts","updater/arrange/tapins/doOverride.ts","updater/measure/tapins/doOverride.ts","updater/render/tapins/doRender.ts"],"names":["Fayde","Fayde.WebGL","Fayde.WebGL.WebGLCanvas","Fayde.WebGL.WebGLCanvas.constructor","Fayde.WebGL.WebGLCanvas.CreateLayoutUpdater","Fayde.WebGL.WebGLCanvas.OnSourceChanged","Fayde.WebGL.WebGLCanvas.OnDraw","Fayde.WebGL.reactions","Fayde.WebGL.WebGLDrawEventArgs","Fayde.WebGL.WebGLDrawEventArgs.constructor","Fayde.WebGL.WebGLSource","Fayde.WebGL.WebGLSource.constructor","Fayde.WebGL.WebGLSource.resize","Fayde.WebGL.WebGLSource.draw","Fayde.WebGL.WebGLSource.detach","Fayde.WebGL.WebGLSource.attach","fayde","fayde.webgl","fayde.webgl.updater","fayde.webgl.updater.WebGLCanvasUpdater","fayde.webgl.updater.WebGLCanvasUpdater.constructor","fayde.webgl.updater.WebGLCanvasUpdater.init","fayde.webgl.updater.WebGLCanvasUpdater.onSurfaceChanged","fayde.webgl.updater.WebGLCanvasUpdater.preRender","fayde.webgl.updater.WebGLCanvasUpdater.onSizeChanged","fayde.webgl.updater.arrange","fayde.webgl.updater.arrange.WebGLCanvasArrangePipeDef","fayde.webgl.updater.arrange.WebGLCanvasArrangePipeDef.constructor","fayde.webgl.updater.measure","fayde.webgl.updater.measure.WebGLCanvasMeasurePipeDef","fayde.webgl.updater.measure.WebGLCanvasMeasurePipeDef.constructor","fayde.webgl.updater.render","fayde.webgl.updater.render.WebGLCanvasRenderPipeDef","fayde.webgl.updater.render.WebGLCanvasRenderPipeDef.constructor","fayde.webgl.updater.arrange.tapins","fayde.webgl.updater.arrange.tapins.buildLayoutClip","fayde.webgl.updater.arrange.tapins.doOverride","fayde.webgl.updater.measure.tapins","fayde.webgl.updater.measure.tapins.doOverride","fayde.webgl.updater.render.tapins","fayde.webgl.updater.render.tapins.doRender"],"mappings":"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","file":"fayde.webgl.js","sourcesContent":["module Fayde.WebGL {\r\n    export var version = '0.1.0';\r\n}","module Fayde.WebGL {\r\n    export class WebGLCanvas extends FrameworkElement {\r\n        CreateLayoutUpdater() {\r\n            return new fayde.webgl.updater.WebGLCanvasUpdater();\r\n        }\r\n\r\n        static SourceProperty = DependencyProperty.Register(\"Source\", () => WebGL.WebGLSource, WebGLCanvas, undefined, (d: WebGLCanvas, args) => d.OnSourceChanged(args.OldValue, args.NewValue));\r\n        Source: WebGL.WebGLSource;\r\n\r\n        Draw = new nullstone.Event<WebGL.WebGLDrawEventArgs>();\r\n\r\n        constructor() {\r\n            super();\r\n            this.DefaultStyleKey = WebGLCanvas;\r\n            if (!this.Source)\r\n                this.SetCurrentValue(WebGLCanvas.SourceProperty, new WebGL.WebGLSource(document.createElement('canvas')));\r\n        }\r\n\r\n        protected OnSourceChanged(oldSource: WebGL.WebGLSource, newSource: WebGL.WebGLSource) {\r\n            if (oldSource)\r\n                oldSource.detach();\r\n            if (newSource)\r\n                newSource.attach((gl, width, height) => this.OnDraw(gl, width, height));\r\n        }\r\n\r\n        protected OnDraw(gl: WebGLRenderingContext, width: number, height: number) {\r\n            this.Draw.raise(this, new WebGL.WebGLDrawEventArgs(gl, width, height));\r\n        }\r\n    }\r\n    Fayde.CoreLibrary.add(WebGLCanvas);\r\n\r\n    module reactions {\r\n        UIReaction(WebGLCanvas.SourceProperty, (upd, ov, nv, wc: WebGLCanvas) => {\r\n            (<any>wc).OnSourceChanged(ov, nv);\r\n        }, false);\r\n    }\r\n}","module Fayde.WebGL {\r\n    export class WebGLDrawEventArgs implements nullstone.IEventArgs {\r\n        gl: WebGLRenderingContext;\r\n        width: number;\r\n        height: number;\r\n\r\n        constructor(gl: WebGLRenderingContext, width: number, height: number) {\r\n            Object.defineProperties(this, {\r\n                \"gl\": {value: gl, writable: false},\r\n                \"width\": {value: width, writable: false},\r\n                \"height\": {value: height, writable: false}\r\n            });\r\n        }\r\n    }\r\n}","module Fayde.WebGL {\r\n    export interface IDrawEvent {\r\n        (gl: WebGLRenderingContext, width: number, height: number);\r\n    }\r\n\r\n    export class WebGLSource implements fayde.webgl.updater.IWebGLSource {\r\n        private $gl: WebGLRenderingContext;\r\n        private $onDraw: IDrawEvent;\r\n\r\n        constructor(private $element: HTMLCanvasElement) {\r\n            this.$gl = <WebGLRenderingContext>($element.getContext(\"webgl\") || $element.getContext(\"experimental-webgl\"));\r\n        }\r\n\r\n        resize(width: number, height: number) {\r\n            var canvas = this.$element;\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n        }\r\n\r\n        draw(ctx: CanvasRenderingContext2D) {\r\n            //TODO: Optimize clipping of gl canvas inside perspective of\r\n            var canvas = this.$element;\r\n            this.$onDraw && this.$onDraw(this.$gl, canvas.width, canvas.height);\r\n            ctx.drawImage(this.$element, 0, 0);\r\n        }\r\n\r\n        detach() {\r\n            this.$onDraw = null;\r\n        }\r\n\r\n        attach(onDraw: IDrawEvent) {\r\n            this.$onDraw = onDraw;\r\n        }\r\n    }\r\n}","module fayde.webgl.updater {\r\n    export interface IWebGLUpdaterAssets extends minerva.core.IUpdaterAssets, measure.IInput, arrange.IInput, render.IInput {\r\n        source: IWebGLSource;\r\n    }\r\n\r\n    export class WebGLCanvasUpdater extends minerva.core.Updater {\r\n        assets: IWebGLUpdaterAssets;\r\n\r\n        init() {\r\n            this.setMeasurePipe(minerva.singleton(measure.WebGLCanvasMeasurePipeDef))\r\n                .setArrangePipe(minerva.singleton(arrange.WebGLCanvasArrangePipeDef))\r\n                .setProcessDownPipe(minerva.singleton(minerva.controls.canvas.processdown.CanvasProcessDownPipeDef))\r\n                .setProcessUpPipe(minerva.singleton(minerva.controls.canvas.processup.CanvasProcessUpPipeDef))\r\n                .setRenderPipe(minerva.singleton(render.WebGLCanvasRenderPipeDef));\r\n\r\n            var assets = this.assets;\r\n            assets.source = null;\r\n\r\n            super.init();\r\n        }\r\n\r\n        onSurfaceChanged(oldSurface: minerva.core.ISurface, newSurface: minerva.core.ISurface) {\r\n            if (oldSurface)\r\n                oldSurface.unhookPrerender(this);\r\n            if (newSurface)\r\n                newSurface.hookPrerender(this);\r\n        }\r\n\r\n        preRender() {\r\n            var assets = this.assets;\r\n            if (assets.source)\r\n                this.invalidate();\r\n        }\r\n\r\n        onSizeChanged(oldSize: Size, newSize: Size) {\r\n            super.onSizeChanged(oldSize, newSize);\r\n            var source = this.assets.source;\r\n            if (source)\r\n                source.resize(newSize.width, newSize.height);\r\n        }\r\n    }\r\n}","module fayde.webgl.updater.arrange {\r\n    export interface IInput extends minerva.core.arrange.IInput {\r\n    }\r\n    export interface IState extends minerva.core.arrange.IState {\r\n    }\r\n    export interface IOutput extends minerva.core.arrange.IOutput {\r\n    }\r\n    export class WebGLCanvasArrangePipeDef extends minerva.core.arrange.ArrangePipeDef {\r\n        constructor() {\r\n            super();\r\n            this.replaceTapin('doOverride', tapins.doOverride)\r\n                .replaceTapin('buildLayoutClip', tapins.buildLayoutClip);\r\n        }\r\n    }\r\n}","module fayde.webgl.updater.measure {\r\n    export interface IInput extends minerva.core.measure.IInput {\r\n    }\r\n    export interface IState extends minerva.core.measure.IState {\r\n    }\r\n    export interface IOutput extends minerva.core.measure.IOutput {\r\n    }\r\n\r\n    export class WebGLCanvasMeasurePipeDef extends minerva.core.measure.MeasurePipeDef {\r\n        constructor() {\r\n            super();\r\n            this.replaceTapin('doOverride', tapins.doOverride);\r\n        }\r\n    }\r\n}","module fayde.webgl.updater.render {\r\n    export interface IInput extends minerva.core.render.IInput {\r\n        source: IWebGLSource;\r\n    }\r\n\r\n    export class WebGLCanvasRenderPipeDef extends minerva.core.render.RenderPipeDef {\r\n        constructor() {\r\n            super();\r\n            this.replaceTapin('doRender', tapins.doRender);\r\n        }\r\n    }\r\n}","module fayde.webgl.updater.arrange.tapins {\r\n    export function buildLayoutClip (input: IInput, state: IState, output: IOutput, tree: minerva.core.IUpdaterTree, finalRect: Rect): boolean {\r\n        var lc = output.layoutClip;\r\n        lc.x = lc.y = lc.width = lc.height = 0;\r\n        return true;\r\n    }\r\n}","module fayde.webgl.updater.arrange.tapins {\r\n    export function doOverride (input: IInput, state: IState, output: IOutput, tree: minerva.core.IUpdaterTree, finalRect: Rect): boolean {\r\n        var cr = state.childRect;\r\n        Size.copyTo(state.finalSize, state.arrangedSize);\r\n        return true;\r\n    }\r\n}","module fayde.webgl.updater.measure.tapins {\r\n    export function doOverride(input: IInput, state: IState, output: IOutput, tree: minerva.core.IUpdaterTree, availableSize: Size): boolean {\r\n        var available = state.availableSize;\r\n        var desired = output.desiredSize;\r\n        desired.width = desired.height = 0;\r\n        return true;\r\n    }\r\n}","module fayde.webgl.updater.render.tapins {\r\n    export function doRender(input: IInput, state: minerva.core.render.IState, output: minerva.core.render.IOutput, ctx: minerva.core.render.RenderContext, region: Rect, tree: minerva.core.IUpdaterTree): boolean {\r\n        var source = input.source;\r\n        if (!source)\r\n            return true;\r\n\r\n        ctx.save();\r\n        minerva.core.helpers.renderLayoutClip(ctx, input, tree);\r\n        source.draw(ctx.raw);\r\n        ctx.restore();\r\n\r\n        return true;\r\n    }\r\n}"],"sourceRoot":"/source/"}